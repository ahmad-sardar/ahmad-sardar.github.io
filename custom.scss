/*-- scss:defaults --*/

// ============================================
// SKY/CYAN BLUE COLOR PALETTE
// ============================================

// Primary Blue Colors (Darker, muted tones for better contrast)
$blue-deep: #0c1220;
$blue-dark: #0f172a;
$blue-base: #1e3a5f;      // Darker blue-gray
$blue-medium: #3b5f8f;    // Muted medium blue
$blue-accent: #5b8db8;    // Softer accent blue
$blue-light: #7ba3c7;     // Muted light blue
$blue-bright: #9bb8d4;    // Subtle bright blue
$blue-highlight: #b8cfe0; // Soft highlight

// Semantic Colors
$primary: $blue-accent;
$secondary: $blue-light;
$accent: $blue-bright;
$success: #10b981;  // Green for tip callouts
$warning: #f59e0b;  // Amber for warning callouts
$danger: #ef4444;   // Red for important callouts
$caution: #f97316;  // Orange for caution callouts
$info: $blue-highlight;

// Background Colors
$navbar-bg: $blue-deep;
$navbar-fg: #e5e7eb;
$body-bg: $blue-dark;
$content-bg: rgba(15, 23, 42, 0.6);

// Text Colors
$text-primary: #e5e7eb;
$text-secondary: #cbd5e1;
$text-muted: #94a3b8;
$text-bright: #f1f5f9;

// Border Colors (muted to match new palette)
$border-color: rgba(91, 141, 184, 0.2);
$border-light: rgba(91, 141, 184, 0.1);
$border-medium: rgba(91, 141, 184, 0.3);

// Spacing
$spacing-xs: 0.25rem;
$spacing-sm: 0.5rem;
$spacing-md: 1rem;
$spacing-lg: 1.5rem;
$spacing-xl: 2rem;
$spacing-2xl: 2.5rem;

// Typography
$font-family-base: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
$font-family-mono: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
$font-family-math: 'Computer Modern', 'Times New Roman', serif;

// Transitions
$transition-fast: 0.15s ease;
$transition-base: 0.3s ease;
$transition-slow: 0.5s ease;

// Border Radius
$radius-sm: 4px;
$radius-md: 8px;
$radius-lg: 12px;
$radius-xl: 16px;

// Shadows
$shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.2);
$shadow-md: 0 4px 16px rgba(0, 0, 0, 0.3);
$shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.4);
$shadow-blue: 0 4px 12px rgba(34, 211, 238, 0.2);

/*-- scss:rules --*/

// ============================================
// BASE STYLES
// ============================================

// Smooth scrolling
html {
  scroll-behavior: smooth;
}

// Global transitions
* {
  transition: color $transition-base, background-color $transition-base, 
              border-color $transition-base, transform $transition-base,
              box-shadow $transition-base;
}

// Body defaults
body {
  background: linear-gradient(135deg, $blue-deep 0%, $blue-dark 100%);
  background-attachment: fixed;
  color: $text-primary;
  font-family: $font-family-base;
  font-weight: 400;
  letter-spacing: 0.3px;
  line-height: 1.6;
  min-height: 100vh;
}

// ============================================
// TYPOGRAPHY
// ============================================

// Headings
h1, h2, h3, h4, h5, h6 {
  color: $text-bright;
  font-weight: 700;
  letter-spacing: -0.5px;
  line-height: 1.2;
  margin-top: 0;
}

h1 {
  font-size: 3rem;
  margin-top: 1px;
  margin-bottom: $spacing-lg;
  background: linear-gradient(135deg, $blue-medium 0%, $blue-accent 50%, $blue-light 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

h2 {
  font-size: 2rem;
  margin-top: $spacing-2xl;
  margin-bottom: $spacing-lg;
  padding-bottom: $spacing-md;
  border-bottom: 2px solid $border-medium;
  color: $blue-accent;
  
  // Ensure links in h2 headings match the theme
  a {
    color: $blue-accent;
    text-decoration: none;
    
    &:hover {
      color: $blue-light;
      
      &::after {
        display: none; // Remove underline on hover for h2 links
      }
    }
  }
}

h3 {
  font-size: 1.5rem;
  margin-top: $spacing-xl;
  margin-bottom: $spacing-md;
  color: $blue-light;
  font-weight: 600;
  letter-spacing: -0.3px;
}

h4 {
  font-size: 1.25rem;
  margin-top: $spacing-lg;
  margin-bottom: $spacing-sm;
  color: $text-primary;
  font-weight: 600;
}

h5, h6 {
  font-size: 1.1rem;
  margin-top: $spacing-md;
  margin-bottom: $spacing-sm;
  color: $text-secondary;
}

// Paragraphs
p {
  line-height: 1.8;
  color: $text-secondary;
  font-size: 1.05rem;
  margin-bottom: $spacing-md;
}

// Links
a {
  color: $blue-light;
  text-decoration: none;
  font-weight: 500;
  position: relative;
  
  // Don't apply underline animation to external links (they have their own ::after for icon)
  &:not(.external)::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -2px;
    left: 0;
    background: linear-gradient(90deg, $blue-light, $blue-bright);
    transition: width $transition-base;
  }
  
  &:hover {
    color: $blue-bright;
    
    &:not(.external)::after {
      width: 100%;
    }
  }
}

// Remove Quarto's external link icon (chain symbol) completely - multiple selectors for maximum coverage
a.external::after,
a[href^="http"]::after,
a[href^="https"]::after,
a[href^="mailto"]::after,
a.external:hover::after,
a[href^="http"]:hover::after,
a[href^="https"]:hover::after,
a[href^="mailto"]:hover::after {
  display: none !important;
  visibility: hidden !important;
  content: '' !important;
  background-image: none !important;
  background-size: none !important;
  background-repeat: no-repeat !important;
  background-position: center center !important;
  margin: 0 !important;
  padding: 0 !important;
  width: 0 !important;
  height: 0 !important;
  opacity: 0 !important;
  font-size: 0 !important;
  line-height: 0 !important;
}

// Math rendering
.math {
  font-family: $font-family-math;
  color: $text-bright;
  padding: $spacing-xs 0;
}

// Lists
ul, ol {
  line-height: 2;
  color: $text-secondary;
  margin-left: $spacing-lg;
  margin-bottom: $spacing-lg;
  padding-left: $spacing-lg;
  
  li {
    margin-bottom: $spacing-md;
    
    &::marker {
      color: $blue-accent;
    }
  }
}

// Blockquotes
blockquote {
  border-left: 4px solid $blue-accent;
  padding-left: $spacing-xl;
  padding-top: $spacing-sm;
  padding-bottom: $spacing-sm;
  color: $text-muted;
  font-style: italic;
  margin: $spacing-xl 0;
  background: rgba(91, 141, 184, 0.05);
  border-radius: 0 $radius-md $radius-md 0;
  backdrop-filter: blur(5px);
}

// ============================================
// CODE BLOCKS
// ============================================

// Inline code
code {
  background: rgba(10, 22, 37, 0.8) !important;
  color: #e2e8f0;
  padding: 3px 8px;
  border-radius: $radius-sm;
  border: 1px solid $border-light;
  font-size: 0.95em;
  font-family: $font-family-mono;
  letter-spacing: 0.2px;
  font-weight: 500;
}

// Code blocks
pre {
  background: rgba(10, 22, 37, 0.95) !important;
  border: 1px solid $border-medium;
  border-radius: $radius-md;
  padding: $spacing-xl;
  overflow-x: auto;
  box-shadow: $shadow-md;
  line-height: 1.5;
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, $blue-medium, $blue-accent, $blue-light);
    border-radius: $radius-md $radius-md 0 0;
  }
  
  code {
    background: transparent;
    color: #e2e8f0;
    border: none;
    padding: 0;
    font-size: 0.9em;
  }
}

// ============================================
// NAVBAR
// ============================================

.navbar {
  background: rgba(12, 18, 32, 0.85) !important;
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-bottom: 1px solid $border-light;
  padding: $spacing-md 0;
  box-shadow: $shadow-sm;
}

.navbar-brand {
  font-weight: 700;
  font-size: 1.5rem;
  background: linear-gradient(135deg, $blue-medium 0%, $blue-accent 50%, $blue-light 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.nav-link {
  color: $text-secondary !important;
  position: relative;
  font-weight: 500;
  font-size: 1rem;
  padding: $spacing-sm $spacing-md !important;
  padding-top: calc(#{$spacing-sm} + 20px) !important;
  border-radius: $radius-sm;
  transition: all $transition-base;
  
  &::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: 5px;
    left: $spacing-md;
    right: $spacing-md;
    background: linear-gradient(90deg, $blue-light, $blue-bright);
    transition: width $transition-base;
    border-radius: 2px;
  }
  
  &:hover {
    color: $blue-light !important;
    background: rgba(91, 141, 184, 0.1);
    
    &::after {
      width: calc(100% - #{$spacing-md * 2});
    }
  }
}

// Move search icon up to align with other navbar icons
.navbar #quarto-search {
  margin-top: 1px;
}

// ============================================
// TABLES
// ============================================

table {
  border-collapse: collapse;
  width: 100%;
  margin: $spacing-xl 0;
  box-shadow: $shadow-md;
  border-radius: $radius-md;
  overflow: hidden;
  background: rgba(15, 26, 46, 0.4);
  backdrop-filter: blur(5px);
  
  thead {
    background: linear-gradient(90deg, rgba(91, 141, 184, 0.3), rgba(123, 163, 199, 0.3));
    border-bottom: 2px solid $border-medium;
  }
  
  th {
    padding: $spacing-lg;
    text-align: left;
    font-weight: 600;
    color: $text-bright;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    font-size: 0.875rem;
  }
  
  td {
    padding: $spacing-md $spacing-lg;
    border-bottom: 1px solid $border-light;
    color: $text-secondary;
  }
  
  tbody tr {
    transition: background-color $transition-base;
    
    &:hover {
      background: rgba(91, 141, 184, 0.15);
    }
    
    &:last-child td {
      border-bottom: none;
    }
  }
}

// ============================================
// CALLOUT BOXES
// ============================================

.callout {
  margin: $spacing-xl 0;
  padding: $spacing-xl;
  border-radius: $radius-md;
  backdrop-filter: blur(5px);
  position: relative;
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    transition: background $transition-base;
  }
  
  // Note callout - Blue (aligned with default theme)
  &.callout-note {
    border-left: 4px solid $blue-accent;
    background: rgba(27, 130, 220, 0.575);
    box-shadow: 0 4px 12px rgba(5, 9, 13, 0.15);
    
    &::before {
      background: linear-gradient(180deg, $blue-accent, $blue-light);
    }
  }
  
  // Tip callout - Green (success)
  &.callout-tip {
    border-left: 4px solid $success;
    background: rgba(16, 185, 129, 0.1);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.15);
    
    &::before {
      background: linear-gradient(180deg, $success, #34d399);
    }
  }
  
  // Warning callout - Amber/Yellow
  &.callout-warning {
    border-left: 4px solid $warning;
    background: rgba(245, 158, 11, 0.1);
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.15);
    
    &::before {
      background: linear-gradient(180deg, $warning, #fbbf24);
    }
  }
  
  // Caution callout - Orange
  &.callout-caution {
    border-left: 4px solid $caution;
    background: rgba(249, 115, 22, 0.1);
    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.15);
    
    &::before {
      background: linear-gradient(180deg, $caution, #fb923c);
    }
  }
  
  // Important callout - Red (danger)
  &.callout-important {
    border-left: 4px solid $danger;
    background: rgba(239, 68, 68, 0.1);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.15);
    
    &::before {
      background: linear-gradient(180deg, $danger, #f87171);
    }
  }
  
}

// ============================================
// IMAGES & FIGURES
// ============================================

img {
  border-radius: $radius-md;
  max-width: 100%;
  height: auto;
  box-shadow: $shadow-md;
  transition: transform $transition-base, box-shadow $transition-base;
  
  &:hover {
    transform: scale(1.02);
    box-shadow: $shadow-lg;
  }
}

figure {
  margin: $spacing-xl 0;
  text-align: center;
}

figcaption {
  color: $text-muted;
  font-size: 0.95rem;
  margin-top: $spacing-md;
  font-style: italic;
}

// ============================================
// LAYOUT COMPONENTS
// ============================================

// Sidebar
#quarto-sidebar {
  background: rgba(12, 18, 32, 0.6);
  border-right: 1px solid $border-light;
  backdrop-filter: blur(10px);
}

// Sidebar TOC - Override green highlighting to match blue theme
.sidebar nav[role="doc-toc"] ul > li > a.active,
.sidebar nav[role="doc-toc"] ul > li > ul > li > a.active {
  border-left-color: $blue-accent !important;
  color: $blue-accent !important;
}

.sidebar nav[role="doc-toc"] ul > li > a:hover,
.sidebar nav[role="doc-toc"] ul > li > ul > li > a:hover {
  color: $blue-light !important;
}

// Main content area
#quarto-content {
  padding: $spacing-xl;
  padding-top: $spacing-md;
  
  // Move first element (which contains title) up by reducing its padding-top
  > *:first-child {
    padding-top: calc(1rem - 10px) !important;
  }
}

main {
  background: rgba(15, 23, 42, 0.6);
  backdrop-filter: blur(10px);
  border-radius: $radius-lg;
  padding: $spacing-2xl;
  margin: $spacing-xl auto;
  max-width: 900px;
  box-shadow: $shadow-lg;
  border: 1px solid $border-light;
}

// TOC styling
.toc {
  background: rgba(91, 141, 184, 0.05);
  border-radius: $radius-md;
  padding: $spacing-lg;
  border: 1px solid $border-light;
  backdrop-filter: blur(5px);
}

.toc-item {
  color: $text-secondary !important;
  transition: all $transition-base;
  padding: $spacing-sm 0;
  
  &:hover {
    color: $blue-light !important;
    padding-left: $spacing-sm;
  }
}

.toc-item.active {
  color: $blue-light !important;
  font-weight: 600;
  border-left: 3px solid $blue-accent;
  padding-left: $spacing-md;
}

// Footer
.page-footer {
  border-top: 1px solid $border-light;
  padding-top: $spacing-xl;
  padding-bottom: $spacing-xl;
  background: rgba(12, 18, 32, 0.5);
  backdrop-filter: blur(5px);
  margin-top: $spacing-2xl;
}

// ============================================
// SCROLLBAR STYLING
// ============================================

::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background: rgba(91, 141, 184, 0.05);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: rgba(91, 141, 184, 0.3);
  border-radius: 10px;
  border: 2px solid transparent;
  background-clip: padding-box;
  
  &:hover {
    background: rgba(91, 141, 184, 0.5);
    background-clip: padding-box;
  }
}

// ============================================
// RESPONSIVE DESIGN
// ============================================

@media (max-width: 768px) {
  h1 {
    font-size: 2rem;
  }
  
  h2 {
    font-size: 1.5rem;
    margin-top: $spacing-xl;
    margin-bottom: $spacing-lg;
    padding-bottom: $spacing-md;
    border-bottom: 2px solid $border-medium;
    color: $blue-accent;

    &:not(:has(a)) {
      cursor: default;
    }
  }
  
  h3 {
    font-size: 1.25rem;
  }
  
  main {
    padding: $spacing-lg;
    border-radius: $radius-md;
    margin: $spacing-md;
  }
  
  code {
    font-size: 0.9em;
  }
  
  table {
    font-size: 0.95rem;
    display: block;
    overflow-x: auto;
  }
  
  th, td {
    padding: $spacing-sm $spacing-md;
  }
  
  .callout {
    padding: $spacing-md;
  }
}

// ============================================
// PRINT STYLES
// ============================================

@media print {
  body {
    background: white;
    color: #000;
  }
  
  main {
    background: white;
    box-shadow: none;
    border: none;
    padding: 0;
    margin: 0;
  }
  
  a {
    color: $blue-accent;
    text-decoration: none;
    cursor: pointer;
    transition: color $transition-base;
    
    &:hover {
      color: $blue-light;
      text-decoration: underline;
      
      &::after {
        display: none; // Remove underline on hover for h2 links
      }
    }
  }

  
  .navbar,
  #quarto-sidebar,
  .page-footer {
    display: none;
  }
  
  pre {
    background: #f5f5f5 !important;
    border: 1px solid #ddd;
    
    code {
      color: #000;
    }
  }
  
  table {
    background: white;
    
    thead {
      background: #f0f0f0;
    }
  }
}

// Final override to remove ALL external link icons - must be at the end to override everything
a.external::after,
a[href^="http"]::after,
a[href^="https"]::after,
a[href^="mailto"]::after {
  all: unset !important;
  display: none !important;
  content: none !important;
  background-image: none !important;
}


